{% extends "index.html" %}

{% block content %}
<nav id="edit-question-nav" class="navigation">
    {% if question.title %}
    <a id="edit-question-button" href="/question/{{ question.id }}/edit">Edit question</a>
    {% endif %}
    <form id="delete-form" action="/question/{{ question.id }}" method="POST">
        <button id="delete-question-button" type="submit">Delete question</button>
    </form>
</nav>
<section id="question">
    <section id="question-body">
        <section>
            <h3>{{ question.title if question.title }}</h3>
            <p>{{ question.message if question.message }}</p>
        </section>
        {% if question.image %}
        <img src="/static/images/{{ question.image }}">
        {% endif %}
    </section>
    <footer id="question-footer">
        {% for tag in tag_list %}
            <span class="tags">{{ tag.name }} <a class="delete-tag" href="/question/{{ question.id }}/tag/{{ tag.id }}/delete">x</a></span>
        {% endfor %}
        <p><a class="new-tag" href="/question/{{ question.id }}/new-tag">Add tag</a></p>
    </footer>
    <section>
        <p id="comments-text" >Comments for question:</p>
        <ul>
            {% if comment is not none %}
            {% for comment in comments %}
            {% if comment.question_id == question.id%}
                <li class="comment">
                <a class="delete-comment" href="/comments/{{ comment.id }}/delete">x</a>
                <a id="edit-comment" href="/comment/{{ comment.id }}/edit"> {{ comment.message }} - Edited {{ comment.edited_count }} times. </a>
                </li>
            {% endif %}
            {% endfor %}
            {% endif %}
        </ul>
    </section>

</section>

<section id="answers">
    <a id="add-new-comment" href="/question/{{ question.id }}/new-comment">Add new comment</a>
    <a id="add-answer-button" href="/question/{{ question.id }}/add-answer">Add new answer</a>
    <ul>
        {% if answer is not none %}
        {% for answer in answers %}
        <li>
            <section style="display: flex">
            {% if answer.image %}
                <p class="answer-image"><img src="/static/images/{{ answer.image }}"></p>
            {% endif %}
                <section class="answer-buttons">
                    <a class="edit-answer-button" href="/answer/{{ answer.id }}/edit">Edit answer</a>
                    <a class="add-comment-to-answer" href="/answer/{{ answer.id }}/new-comment"> {{ answer.message }} </a>

                    {% if answer.accepted_state == false %}
                        <form action="/answer/{{ answer.id }}/edit" method="post">
                            <button name="unaccepted_state" value="true">Accept answer</button>
                        </form>

                    {% endif %}

                    {% if answer.accepted_state %}
                        <form action="/answer/{{ answer.id }}/edit" method="post">
                            <button name="unaccepted_state" value="false">Unaccept answer</button>
                        </form>

                    <h5>Accepted answer</h5>
                    {% endif %}



                </section>
            </section>
            <section>
            {% if comments is not none %}
                {% for comment in comments %}
                {% if comment.answer_id == answer.id %}
                <ul>

                <li class="edit-answer-comment">
                <a class="delete-comment" href="/comments/{{ comment.id }}/delete">x</a>
                <a id="edit-comment" href="/comment/{{ comment.id }}/edit"> {{ comment.message }} - Edited {{ comment.edited_count }} times.</a>
                </li>




                </ul>
                {% endif %}
            {% endfor %}
            {% endif %}
            </section>
        </li>
        {% endfor %}
        {% endif %}
    </ul>
</section>


{% endblock %}